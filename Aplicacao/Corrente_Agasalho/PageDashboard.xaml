<Page x:Class="PageDashboard"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
      xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
      xmlns:local="clr-namespace:Corrente_Agasalho"
      mc:Ignorable="d" 
      d:DesignHeight="800" d:DesignWidth="1000"
      Title="PageDashboard"
      Background="Transparent"
      Loaded="Page_Loaded">

    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
        <Grid Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <StackPanel Grid.Row="0" Margin="0,0,0,20">
                <TextBlock Text="Painel de Monitoramento"
                           FontSize="28"
                           FontWeight="Bold"
                           Foreground="{StaticResource CorTextoPrincipal}"/>
                <TextBlock Text="Visão geral, indicadores-chave e previsão do tempo."
                           FontSize="16"
                           Foreground="{StaticResource CorTextoSecundario}"/>
            </StackPanel>

            <Border Grid.Row="1"
                    Style="{StaticResource EstiloCard}"
                    Margin="0,0,0,20">
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <Image x:Name="imgIconeClima" Grid.Column="0"
                           Source="https://openweathermap.org/img/wn/10d@2x.png" 
                           Width="100" Height="100" Margin="0,0,20,0" VerticalAlignment="Center"/>

                    <StackPanel Grid.Column="1" VerticalAlignment="Center">
                        <TextBlock x:Name="txtTemperatura" Text="--°C" FontSize="48" FontWeight="Bold" Foreground="{StaticResource CorTextoPrincipal}"/>
                        <TextBlock x:Name="txtCondicao" Text="Carregando clima..." FontSize="18" FontWeight="SemiBold" Foreground="{StaticResource CorTextoSecundario}"/>
                        <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                            <TextBlock Text="Umidade: " FontSize="14" Foreground="{StaticResource CorTextoSecundario}"/>
                            <TextBlock x:Name="txtUmidade" Text="--%" FontSize="14" FontWeight="Bold" Foreground="{StaticResource CorTextoSecundario}" Margin="0,0,15,0"/>
                            <TextBlock Text="Vento: " FontSize="14" Foreground="{StaticResource CorTextoSecundario}"/>
                            <TextBlock x:Name="txtVento" Text="-- km/h" FontSize="14" FontWeight="Bold" Foreground="{StaticResource CorTextoSecundario}"/>
                        </StackPanel>
                        <TextBlock x:Name="txtCidadeClima" Text="" FontSize="14" Foreground="{StaticResource CorTextoSecundario}" Margin="0,5,0,0"/>
                    </StackPanel>

                    <Button x:Name="btnAtivarModoAlerta" Grid.Column="2"
                            Content="Ativar Modo Alerta" Style="{StaticResource EstiloBotaoDestaque}"
                            Height="45" Width="200" Margin="40,0,0,0" HorizontalAlignment="Right" VerticalAlignment="Center"
                            ToolTip="A API de Clima indica baixas temperaturas!"
                            Visibility="Collapsed" Click="BtnAtivarModoAlerta_Click"/>
                    <Button x:Name="btnDesativarModoAlerta" Grid.Column="2"
        Content="Desativar Alerta" 
        Style="{StaticResource EstiloBotaoPerigo}"
        Height="45" Width="200" Margin="40,0,0,0" 
        HorizontalAlignment="Right" VerticalAlignment="Center"
        ToolTip="Volta o sistema para operação normal."
        Visibility="Collapsed" 
        Click="BtnDesativarModoAlerta_Click"/>
                </Grid>
            </Border>

            <UniformGrid Grid.Row="2" Columns="3">
                <Border Style="{StaticResource EstiloCard}" Margin="0,0,20,20">
                    <StackPanel>
                        <TextBlock Text="MODO DE ALERTA DE FRIO" FontSize="14" FontWeight="SemiBold" Foreground="{StaticResource CorTextoSecundario}" Margin="0,0,0,10"/>
                        <TextBlock x:Name="txtStatusModoAlerta" Text="INATIVO" FontSize="48" FontWeight="Bold" Foreground="{StaticResource CorAcaoPerigo}"/>
                    </StackPanel>
                </Border>
                <Border Style="{StaticResource EstiloCard}" Margin="0,0,20,20">
                    <StackPanel>
                        <TextBlock Text="PEÇAS ESSENCIAIS (ESTOQUE)" FontSize="14" FontWeight="SemiBold" Foreground="{StaticResource CorTextoSecundario}" Margin="0,0,0,10"/>
                        <TextBlock x:Name="txtTotalPecasEssenciais" Text="0" FontSize="48" FontWeight="Bold" Foreground="{StaticResource CorTextoPrincipal}"/>
                    </StackPanel>
                </Border>
                <Border Style="{StaticResource EstiloCard}" Margin="0,0,0,20">
                    <StackPanel>
                        <TextBlock Text="PESSOAS VULNERÁVEIS" FontSize="14" FontWeight="SemiBold" Foreground="{StaticResource CorTextoSecundario}" Margin="0,0,0,10"/>
                        <TextBlock x:Name="txtTotalPessoasVulneraveis" Text="0" FontSize="48" FontWeight="Bold" Foreground="{StaticResource CorTextoPrincipal}"/>
                    </StackPanel>
                </Border>
            </UniformGrid>

            <Border Grid.Row="3"
                    Style="{StaticResource EstiloCard}"
                    Padding="25">
                <StackPanel>
                    <TextBlock Text="Previsão para os próximos dias"
                               FontSize="18"
                               FontWeight="Bold"
                               Foreground="{StaticResource CorTextoPrincipal}"
                               Margin="0,0,0,15"/>

                    <ItemsControl x:Name="ListViewPrevisao">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <UniformGrid Rows="1"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>

                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Orientation="Vertical" HorizontalAlignment="Center" Margin="5,5,5,10">
                                    <TextBlock Text="{Binding DiaSemana}" 
                                               FontSize="16"
                                               FontWeight="Bold"
                                               Foreground="{StaticResource CorTextoPrincipal}"
                                               HorizontalAlignment="Center"/>
                                    <Image Source="{Binding IconeUrl}" Width="60" Height="60"/>

                                    <StackPanel Orientation="Horizontal" HorizontalAlignment="Center">
                                        <TextBlock Text="{Binding MaxTemp}" 
                                                   FontSize="15"
                                                   FontWeight="SemiBold"
                                                   Foreground="{StaticResource CorTextoPrincipal}"/>
                                        <TextBlock Text=" / " FontSize="15" Foreground="{StaticResource CorTextoSecundario}"/>
                                        <TextBlock Text="{Binding MinTemp}" 
                                                   FontSize="15"
                                                   Foreground="{StaticResource CorTextoSecundario}"/>
                                    </StackPanel>
                                </StackPanel>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>

                </StackPanel>
            </Border>

        </Grid>
    </ScrollViewer>
</Page>